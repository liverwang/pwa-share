webpackJsonp([1],{0:function(e,t,n){e.exports=n("msSN")},"45Ns":function(e,t){},"5e9e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"state",function(){return r}),n.d(t,"mutations",function(){return a});var r=function(){return{enable:!0,type:"none",effect:"none"}},a={setType:function(e,t){e.type=t},setEffect:function(e,t){e.effect=t}}},BGcx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"state",function(){return p}),n.d(t,"mutations",function(){return h}),n.d(t,"actions",function(){return f});var r=n("Xxa5"),a=n.n(r),o=n("exGp"),s=n.n(o),i=n("bOdI"),c=n.n(i),u=n("mtWM"),l=n.n(u),p=function(){return{weather:{text:"",temp:0}}},h=c()({},"setWeather",function(e,t){var n=t.weatherText,r=t.weatherTemp;e.weather={text:n,temp:r}}),f={setWeather:function(){var e=s()(a.a.mark(function e(t,n){var r,o,s,i=t.commit;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="https://query.yahooapis.com/v1/public/yql?q=select%20item.condition%20from%20weather.forecast%20where%20woeid%20%3D%20"+n.woeid+"&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys",e.next=4,l()(r);case 4:o=e.sent,s=o.data.query.results.channel.item.condition,i("setWeather",{weatherText:s.text,weatherTemp:s.temp}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error in setWeather"),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t,n){return e.apply(this,arguments)}}()}},CJsk:function(e,t){},KCQ2:function(e,t){},LOWA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"SET_PAGE_SCROLL_POSITION",function(){return i}),n.d(t,"state",function(){return c}),n.d(t,"mutations",function(){return u}),n.d(t,"actions",function(){return l});var r=n("bOdI"),a=n.n(r),o=n("Dd8w"),s=n.n(o),i="SET_PAGE_SCROLL_POSITION",c=function(){return{scrollPostionMap:{}}},u=a()({},i,function(e,t){var n=t.pageId,r=t.scrollPosition;e.scrollPostionMap=s()({},e.scrollPostionMap,a()({},n,r))}),l={savePageScrollPosition:function(e,t){var n=e.commit,r=t.pageId,a=t.scrollPosition;n(i,{pageId:r,scrollPosition:a})}}},Ngsc:function(e,t){},Uz7q:function(e,t){e.exports={buildVersion:1526005253192,build:{ssr:!1,publicPath:"/",compress:!0,cssExtract:!0},middleware:{all:[],server:[],client:[]},router:{mode:"history",base:"/",pageTransition:{type:"fade",transitionClass:"fade"}},errorHandler:{defaultErrorMessage:"Internal Server Error",showRealErrorMessage:!1,errorPath:"/error"},serviceWorker:{swDest:"/Users/wangyulong/Documents/workspace/lavas-demo/my-lavas-demo/dist/service-worker.js"},skeleton:{enable:!0,asyncCSS:!0}}},VfP6:function(e,t,n){var r={"./detail.js":"BGcx","./pageTransition.js":"5e9e","./scrollBehavior.js":"LOWA"};function a(e){return n(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="VfP6"},ZFl9:function(e,t){},gHRC:function(e,t){},msSN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n("//Fk"),o=n.n(a),s=n("Gu7T"),i=n.n(s),c=n("Xxa5"),u=n.n(c),l=n("exGp"),p=n.n(l),h=n("/5sW"),f=n("1nuA"),d=(r=p()(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)});function v(e,t){var n={isClient:!0,app:t,store:e.store,route:e.to,from:e.from},r=e.next;return n.params=n.route.params||{},n.query=n.route.query||{},n.redirect=function(e){var t=e.status,a=void 0===t?302:t,o=e.path,s=void 0===o?"":o,i=e.query,c=void 0===i?{}:i,u=e.external,l=void 0!==u&&u;n._redirected=!0,r({path:s,query:c,status:a,external:l})},n}var m,w=(m=p()(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=9;break}if(!n._redirected){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,y(t[r],n);case 6:r++,e.next=1;break;case 9:case"end":return e.stop()}},e,this)})),function(e,t){return m.apply(this,arguments)});function y(e,t){var n=void 0;return 2===e.length?n=new o.a(function(n,r){e(t,function(e,a){e?(t.error(e),r(e)):n(a)})}):(n=e(t))&&(n instanceof o.a||"function"==typeof n.then)||(n=o.a.resolve(n)),n}var _=n("Uz7q"),b=n.n(_),x=n("Dd8w"),g=n.n(x),T=n("p3jY"),k=n.n(T),P=n("/ocq"),E={name:"appshell",metaInfo:{title:"Lavas",meta:[{name:"keywords",content:"lavas PWA"},{name:"description",content:"基于 Vue 的 PWA 解决方案，帮助开发者快速搭建 PWA 应用，解决接入 PWA 的各种问题"}],bodyAttrs:{"empty-appshell":void 0}}},C=n("XyMi");var S=function(e){n("Ngsc")},A=Object(C.a)(E,function(){var e=this.$createElement;return(this._self._c||e)("header",{staticClass:"appshell-header"},[this._v("\n    AppShell\n")])},[],!1,S,"data-v-e0f72820",null).exports,O=n("NYxO"),I={name:"detail-_id",metaInfo:function(){return{title:"Lavas Sample Detail "+this.$route.params.id,titleTemplate:"%s - Lavas",meta:[{name:"keywords",content:"Lavas Sample Detail"},{name:"description",content:"Lavas Sample Detail "+this.$route.params.id}]}},asyncData:function(){var e=p()(u.a.mark(function e(t){var n=t.store;t.route;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.dispatch("detail/setWeather",{woeid:2151849});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),computed:g()({},Object(O.c)("detail",["weather"])),created:function(){console.log("Weather of Shanghai: "+this.weather.text+", "+this.weather.temp+"°F")}};var $=function(e){n("scHK")},L=Object(C.a)(I,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"detail-wrapper"},[n("article",{staticClass:"detail-content"},[n("header",{staticClass:"detail-title"},[e._v("\n            Detail "+e._s(e.$route.params.id)+"\n        ")]),e._v(" "),n("router-link",{attrs:{to:{name:"detailId",params:{id:Number(e.$route.params.id)+1}}}},[e._v("Detail "+e._s(Number(e.$route.params.id)+1))]),e._v(" "),n("p",[e._v("\n            Progressive Web Apps are user experiences that have the reach of the web, and are: Reliable - Load instantly and never show the downasaur, even in uncertain network conditions. Fast - Respond quickly to user interactions with silky smooth animations and no janky scrolling.\n        ")]),e._v(" "),n("router-link",{attrs:{to:"/"}},[e._v("Back to home")])],1)])},[],!1,$,"data-v-7298b8a0",null).exports,j=n("fZjL"),M=n.n(j),q={name:"error",computed:{message:function(){return this.$route.params.error||"您访问的路径不存在"}},created:function(){var e=this.$route.query;0!==M()(e).length&&this.$router.replace({name:"error",params:e})}};var D=function(e){n("45Ns")},W=Object(C.a)(q,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-error"},[t("p",[this._v(this._s(this.message))])])},[],!1,D,"data-v-b5544618",null).exports;var R={name:"index",metaInfo:{title:"Home",titleTemplate:"%s - Lavas",meta:[{name:"keywords",content:"lavas PWA"},{name:"description",content:"基于 Vue 的 PWA 解决方案，帮助开发者快速搭建 PWA 应用，解决接入 PWA 的各种问题"}]},asyncData:function(){var e=p()(u.a.mark(function e(t){t.store,t.route;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()};var B=function(e){n("KCQ2")},N=[{path:"/appshell",component:A,meta:{},name:"appshell"},{path:"/detail/:id",component:L,meta:{},name:"detailId"},{path:"/",component:Object(C.a)(R,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-index"},[t("h2",[this._v("LAVAS")]),this._v(" "),t("h4",[this._v("[ˈlɑ:vəz]")]),this._v(" "),t("router-link",{attrs:{to:{name:"detailId",params:{id:1}}}},[this._v("Go to Detail")])],1)},[],!1,B,"data-v-724d853b",null).exports,meta:{},name:"index"},{path:"/error",component:W,meta:{},name:"error",alias:"*"}];h.a.use(P.a);var F=function(e,t,n){if(n)return n;var r={};return e.hash&&(r.selector=e.hash),e.matched.some(function(e){return e.meta.scrollToTop})&&(r.x=0,r.y=0),r},U=N.filter(function(e){return e.keepAlive||e.meta.keepAlive}).map(function(e){return e.name});var V=n("woOf"),G=n.n(V),H=n("BO1k"),K=n.n(H);h.a.use(O.a);var X=n("VfP6"),Q=X.keys(),Y={},z=!0,J=!1,Z=void 0;try{for(var ee,te=K()(Q);!(z=(ee=te.next()).done);z=!0){var ne=ee.value;if("./index.js"===ne){Y=fe(ne);break}}}catch(e){J=!0,Z=e}finally{try{!z&&te.return&&te.return()}finally{if(J)throw Z}}if("function"!=typeof Y){Y.modules=Y.modules||{};var re=!0,ae=!1,oe=void 0;try{for(var se,ie=K()(Q);!(re=(se=ie.next()).done);re=!0){var ce=se.value;if("./index.js"!==ce){var ue=ce.replace(/^\.\//,"").replace(/\.js$/,""),le=ue.split("/"),pe=de(Y,le);pe[ue=le.pop()]=fe(ce),pe[ue].namespaced=!0}}}catch(e){ae=!0,oe=e}finally{try{!re&&ie.return&&ie.return()}finally{if(ae)throw oe}}}var he=Y instanceof Function?Y:function(){return new O.a.Store(G()({},Y,{state:Y.state instanceof Function?Y.state():{}}))};function fe(e){var t=X(e),n=t.default||t;if(n.commit)throw new Error("[lavas] store/"+e.replace("./","")+" should export a method which returns a Vuex instance.");if(n.state&&"function"!=typeof n.state)throw new Error("[lavas] state should be a function in store/"+e.replace("./",""));return n}function de(e,t){if(1===t.length)return e.modules;var n=t.shift(),r=e.modules[n]=e.modules[n]||{};return r.namespaced=!0,r.modules=r.modules||{},de(r,t)}var ve={name:"updateToast",props:{text:{type:String,default:"站点发生更新，请手动刷新"}},data:function(){return{show:!1,showType:1}},mounted:function(){window.addEventListener("sw.update",this.handleUpdate),window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)},beforeDestroy:function(){window.removeEventListener("sw.update",this.handleUpdate)},methods:{handleUpdate:function(e){this.text="站点发生更新，请手动刷新",this.show=!0,this.showType=1},handleRefresh:function(){window.location.reload()},handleClose:function(){this.show=!1},handleOffline:function(){var e=this;this.text="不好意思，当前处于离线状态",this.show=!0,this.showType=2,setTimeout(function(){return e.show=!1},2e3)},handleOnline:function(){var e=this;this.text="恭喜你，可以上网了",this.show=!0,this.showType=3,setTimeout(function(){return e.show=!1},2e3)}}};var me=function(e){n("qCQ7")},we={name:"app",components:{UpdateToast:Object(C.a)(ve,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"popup"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"update-toast",class:{success:3==e.showType}},[n("span",[e._v(e._s(e.text))]),e._v(" "),1==e.showType?n("span",{staticClass:"update-toast-close-btn",on:{click:e.handleRefresh}},[n("i",{staticClass:"iconfont icon-refresh"})]):e._e(),e._v(" "),2==e.showType||3==e.showType?n("span",{staticClass:"update-toast-close-btn",on:{click:e.handleClose}},[n("i",{staticClass:"iconfont icon-close"})]):e._e()])])},[],!1,me,"data-v-6c095464",null).exports},computed:g()({},Object(O.c)("pageTransition",{pageTransitionType:function(e){return e.type},pageTransitionEffect:function(e){return e.effect}}),Object(O.c)("scrollBehavior",{scrollPostionMap:function(e){return e.scrollPostionMap}}),{pageTransitionClass:function(){return"transition-"+this.pageTransitionType},routerViewKey:function(){var e=this.$route,t=e.name,n=e.params,r=M()(n);return r.length?t+r.reduce(function(e,t){return e+n[t]},""):null}}),data:function(){return{keepAlivePages:U}},methods:g()({},Object(O.b)("scrollBehavior",["savePageScrollPosition"]),{restoreContainerScrollPosition:function(e,t){e.classList.add("app-view-scroll-enabled"),e.scrollTop=t},restoreBodyScrollPosition:function(e,t){e.classList.remove("app-view-scroll-enabled"),document.body.scrollTop=document.documentElement.scrollTop=t},handleBeforeEnter:function(e){var t=this,n=e.dataset.pageId,r=(this.scrollPostionMap[n]||{}).y,a=void 0===r?0:r;h.a.nextTick(function(){t.restoreContainerScrollPosition(e,a)})},handleAfterEnter:function(e){var t=e.dataset.pageId,n=(this.scrollPostionMap[t]||{}).y,r=void 0===n?0:n;this.restoreBodyScrollPosition(e,r)},handleBeforeLeave:function(e){var t=e.dataset.pageId,n=document.body.scrollTop||document.documentElement.scrollTop;this.restoreContainerScrollPosition(e,n),this.savePageScrollPosition({pageId:t,scrollPosition:{y:n}})}})};var ye=function(e){n("gHRC")},_e=Object(C.a)(we,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:e.pageTransitionEffect},on:{"before-enter":e.handleBeforeEnter,"after-enter":e.handleAfterEnter,"before-leave":e.handleBeforeLeave}},[n("keep-alive",{attrs:{include:[].concat(e.keepAlivePages)}},[n("router-view",{key:e.routerViewKey,class:["app-view",e.pageTransitionClass],attrs:{"data-page-id":e.$route.fullPath}})],1)],1),e._v(" "),n("update-toast")],1)},[],!1,ye,null,null).exports;h.a.use(k.a),h.a.config.productionTip=!1;var be={data:function(){return{percent:0,show:!1,canSuccess:!0,duration:3e3,height:"2px",color:"#ffca2b",failedColor:"#ff0000"}},methods:{start:function(){var e=this;return this.show=!0,this.canSuccess=!0,this._timer&&(clearInterval(this._timer),this.percent=0),this._cut=1e4/Math.floor(this.duration),this._timer=setInterval(function(){e.increase(e._cut*Math.random()),e.percent>95&&e.finish()},100),this},set:function(e){return this.show=!0,this.canSuccess=!0,this.percent=Math.floor(e),this},get:function(){return Math.floor(this.percent)},increase:function(e){return this.percent=this.percent+Math.floor(e),this},decrease:function(e){return this.percent=this.percent-Math.floor(e),this},finish:function(){return this.percent=100,this.hide(),this},pause:function(){return clearInterval(this._timer),this},hide:function(){var e=this;return clearInterval(this._timer),this._timer=null,setTimeout(function(){e.show=!1,e.$nextTick(function(){setTimeout(function(){e.percent=0},200)})},500),this},fail:function(){return this.canSuccess=!1,this}}};var xe=function(e){n("ZFl9")},ge=Object(C.a)(be,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"progress",style:{width:this.percent+"%",height:this.height,"background-color":this.canSuccess?this.color:this.failedColor,opacity:this.show?1:0}})},[],!1,xe,"data-v-2e9576fc",null).exports,Te=n("p5k0"),ke=n.n(Te),Pe=n("XGXE"),Ee=n.n(Pe);n("MU8w"),n("CJsk");ke.a.shim(),Ee.a.shim();var Ce,Se,Ae=h.a.prototype.$loading=new h.a(ge).$mount(),Oe=(Ce=function(){var e=new P.a({mode:"history",base:"/",scrollBehavior:F,routes:N});return e.beforeEach(function(t,n,r){e.app.$store&&e.app.$store.state.pageTransition.enable&&(e.app.$store.commit("pageTransition/setType","fade"),e.app.$store.commit("pageTransition/setEffect","fade")),r()}),e}(),Se=he(),{App:h.a.extend(g()({router:Ce,store:Se},_e)),router:Ce,store:Se}),Ie=Oe.App,$e=Oe.router,Le=Oe.store,je=b.a.build,Me=je.ssr,qe=je.cssExtract,De=b.a.middleware,We=void 0===De?{}:De,Re=b.a.skeleton,Be=Re.enable,Ne=Re.asyncCSS,Fe=void 0;window.__INITIAL_STATE__&&Le.replaceState(window.__INITIAL_STATE__),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),document.body.appendChild(Ae.$el),h.a.mixin({beforeRouteUpdate:function(){var e=p()(u.a.mark(function e(t,n,r){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=this.$options.asyncData)?(Ae.start(),a.call(this,{store:this.$store,route:t}).then(function(){Ae.finish(),r()}).catch(r)):r();case 2:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()});var Ue=!0;if(function(){var e=this;$e.beforeEach((t=p()(u.a.mark(function t(n,r,a){var o,s,c,l,p,h,m;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ue||n.path!==r.path){e.next=2;break}return e.abrupt("return",a());case 2:return Ue=!1,o=$e.getMatchedComponents(n),s=[].concat(i()(We.all||[]),i()(We.client||[]),i()(o.filter(function(e){var t=e.middleware;return!!t}).reduce(function(e,t){var n=t.middleware;return e.concat(n)},[]))),e.next=7,d(s);case 7:if(c=e.sent,!(l=s.find(function(e){return"function"!=typeof c[e]}))){e.next=11;break}throw new Error("Unknown middleware "+l);case 11:return p=!1,h=v({to:n,from:r,store:Le,next:function(e){if(Ae.finish&&Ae.finish(),!p){if(p=!0,e.external)return e.query=Object(f.stringify)(e.query),e.path=e.path+(e.query?"?"+e.query:""),window.location.replace(e.path),a();a(e)}}},Fe),m=s.map(function(e){return c[e]}),e.next=17,w(m,h);case 17:p||a();case 18:case"end":return e.stop()}},t,e)})),function(e,n,r){return t.apply(this,arguments)}));var t}(),!document.body.hasAttribute("empty-appshell")&&Me)Fe=new Ie,$e.onReady(function(){Ge(),Fe.$mount("#app")});else{var Ve=Be&&Ne&&qe;window.mountLavas=function(){setTimeout(function(){var e=document.querySelector("#app");e&&(e.innerHTML=""),Fe.$mount("#app")},0)},Ge(),Fe=new Ie,(!Ve||Ve&&window.STYLE_READY)&&window.mountLavas()}function Ge(){var e=this;$e.beforeResolve(function(t,n,r){var a,s=$e.getMatchedComponents(t),i=$e.getMatchedComponents(n),c=!1,l=s.filter(function(e,t){return c||(c=i[t]!==e)});if(!l.length)return r();Ae.start(),o.a.all(l.filter(function(e){return e.asyncData&&(!e.asyncDataFetched||!t.meta.keepAlive)}).map((a=p()(u.a.mark(function n(r){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.asyncData({store:Le,route:t});case 2:r.asyncDataFetched=!0;case 3:case"end":return e.stop()}},n,e)})),function(e){return a.apply(this,arguments)}))).then(function(){Ae.finish(),r()}).catch(r)})}},qCQ7:function(e,t){},scHK:function(e,t){}},[0]);
//# sourceMappingURL=index.80ed3b99.js.map